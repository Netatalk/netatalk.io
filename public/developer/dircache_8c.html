<!-- HTML header for doxygen 1.14.0-->
<!-- modified for netatalk -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>netatalk: dircache.c File Reference</title>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<script
    src="https://cdn.jsdelivr.net/npm/mermaid@11.12.0/dist/mermaid.min.js"
    integrity="o+g/BxPwhi0C3RK7oQBxQuNimeafQ3GE/ST4iT2BxVI4Wzt60SH4pq9iXVYujjaS"
    crossorigin="anonymous"
></script>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <div id="projectrow">
    <div id="projectlogo">
      <a href="/"><img alt="Logo" src="logo.png"/></a>
    </div>
    <div id="projectalign">
      <div id="projectname">
        netatalk
        <span id="projectnumber">&#160;4.4.0dev</span>
      </div>
      <div id="projectbrief">Free and Open Source Apple Filing Protocol (AFP) Server</div>
    </div>
  </div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('dircache_8c.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">dircache.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;assert.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &lt;<a class="el" href="bstrlib_8h_source.html">bstrlib.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="cnid_8h_source.html">atalk/cnid.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="include_2atalk_2directory_8h_source.html">atalk/directory.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="globals_8h_source.html">atalk/globals.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="logger_8h_source.html">atalk/logger.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="queue_8h_source.html">atalk/queue.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="include_2atalk_2util_8h_source.html">atalk/util.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="include_2atalk_2volume_8h_source.html">atalk/volume.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="dircache_8h_source.html">dircache.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="etc_2afpd_2directory_8h_source.html">directory.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="etc_2afpd_2hash_8h_source.html">hash.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-nested-classes" class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:dircache_5Fstat" id="r_dircache_5Fstat"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdircache__stat.html">dircache_stat</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-define-members" class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:abc7d71657be8975a51684e41029b7964" id="r_abc7d71657be8975a51684e41029b7964"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abc7d71657be8975a51684e41029b7964">get16bits</a>(d)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ace18175c2560ab41d9a18ec91ffc0043" id="r_ace18175c2560ab41d9a18ec91ffc0043"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="include_2atalk_2hash_8h.html#ad05b97a5bdacb4cc1aaf4a6268de8b48">hash_val_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ace18175c2560ab41d9a18ec91ffc0043">hash_vid_did</a> (const void *<a class="el" href="hash_8c.html#ae57736c8a0ddeb64dc394712624d8209">key</a>)</td></tr>
<tr class="memitem:afb5dcf2c67945d9207909d9d435037e0" id="r_afb5dcf2c67945d9207909d9d435037e0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afb5dcf2c67945d9207909d9d435037e0">hash_comp_vid_did</a> (const void *key1, const void *key2)</td></tr>
<tr class="memitem:a4a06c650771691a9a12e32f908890cce" id="r_a4a06c650771691a9a12e32f908890cce"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="include_2atalk_2hash_8h.html#ad05b97a5bdacb4cc1aaf4a6268de8b48">hash_val_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4a06c650771691a9a12e32f908890cce">hash_didname</a> (const void *<a class="el" href="uams__dhx2__pam_8c.html#a49c6a1596dbb420280d9aa047ecc4c31">p</a>)</td></tr>
<tr class="memitem:a223c492870dd2784fcff67b99388b302" id="r_a223c492870dd2784fcff67b99388b302"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a223c492870dd2784fcff67b99388b302">hash_comp_didname</a> (const void *k1, const void *k2)</td></tr>
<tr class="memitem:a72606f78425a8e9589512071b0b7dbea" id="r_a72606f78425a8e9589512071b0b7dbea"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a72606f78425a8e9589512071b0b7dbea">should_validate_cache_entry</a> (void)</td></tr>
<tr class="memdesc:a72606f78425a8e9589512071b0b7dbea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if cache entry should be validated against filesystem.  <br /></td></tr>
<tr class="memitem:a6fbb865cb982a5c072a6699996b18db4" id="r_a6fbb865cb982a5c072a6699996b18db4"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6fbb865cb982a5c072a6699996b18db4">cache_entry_externally_modified</a> (struct <a class="el" href="structdir.html">dir</a> *cdir, const struct stat *st)</td></tr>
<tr class="memdesc:a6fbb865cb982a5c072a6699996b18db4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Smart validation for directory cache entries.  <br /></td></tr>
<tr class="memitem:a74d9d9fc41c0cd46eafae3685b073752" id="r_a74d9d9fc41c0cd46eafae3685b073752"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a74d9d9fc41c0cd46eafae3685b073752">dircache_evict</a> (void)</td></tr>
<tr class="memdesc:a74d9d9fc41c0cd46eafae3685b073752"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a fixed number of (oldest) entries from the cache and indexes.  <br /></td></tr>
<tr class="memitem:a1c5f250d2d0fb3ecdf47c16db30179df" id="r_a1c5f250d2d0fb3ecdf47c16db30179df"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structdir.html">dir</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1c5f250d2d0fb3ecdf47c16db30179df">dircache_search_by_did</a> (const struct <a class="el" href="structvol.html">vol</a> *<a class="el" href="structvol.html">vol</a>, <a class="el" href="adouble_8h.html#aef0c7a006ff504f92f04b55e14c27422">cnid_t</a> cnid)</td></tr>
<tr class="memdesc:a1c5f250d2d0fb3ecdf47c16db30179df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Search the dircache via a CNID for a directory.  <br /></td></tr>
<tr class="memitem:a6b96994f92f9267df4f0824e3bd745e5" id="r_a6b96994f92f9267df4f0824e3bd745e5"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structdir.html">dir</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6b96994f92f9267df4f0824e3bd745e5">dircache_search_by_name</a> (const struct <a class="el" href="structvol.html">vol</a> *<a class="el" href="structvol.html">vol</a>, const struct <a class="el" href="structdir.html">dir</a> *<a class="el" href="structdir.html">dir</a>, char *name, int len)</td></tr>
<tr class="memdesc:a6b96994f92f9267df4f0824e3bd745e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Search the cache via did/name hashtable.  <br /></td></tr>
<tr class="memitem:a6d640618cb44b9c65e98d4e8e68620c4" id="r_a6d640618cb44b9c65e98d4e8e68620c4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6d640618cb44b9c65e98d4e8e68620c4">dircache_add</a> (const struct <a class="el" href="structvol.html">vol</a> *<a class="el" href="structvol.html">vol</a>, struct <a class="el" href="structdir.html">dir</a> *<a class="el" href="structdir.html">dir</a>)</td></tr>
<tr class="memdesc:a6d640618cb44b9c65e98d4e8e68620c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">create struct dir from struct path  <br /></td></tr>
<tr class="memitem:a976bdce6decd959a633eca5cc0bb97c0" id="r_a976bdce6decd959a633eca5cc0bb97c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a976bdce6decd959a633eca5cc0bb97c0">dircache_remove</a> (const struct <a class="el" href="structvol.html">vol</a> *<a class="el" href="structvol.html">vol</a> <a class="el" href="cmd__dbd__scanvol_8c.html#a8fa487913fdb31da1be2f0b18ece0755">_U_</a>, struct <a class="el" href="structdir.html">dir</a> *<a class="el" href="structdir.html">dir</a>, int <a class="el" href="cmd__dbd_8c.html#a5b5dc5446eb7e7a502a06d67b7ea302c">flags</a>)</td></tr>
<tr class="memdesc:a976bdce6decd959a633eca5cc0bb97c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove an entry from the dircache.  <br /></td></tr>
<tr class="memitem:a425ed736a4c8f16731a5648b23719735" id="r_a425ed736a4c8f16731a5648b23719735"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a425ed736a4c8f16731a5648b23719735">dircache_remove_children</a> (const struct <a class="el" href="structvol.html">vol</a> *<a class="el" href="structvol.html">vol</a>, struct <a class="el" href="structdir.html">dir</a> *<a class="el" href="structdir.html">dir</a>)</td></tr>
<tr class="memdesc:a425ed736a4c8f16731a5648b23719735"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove all child entries of a directory from the dircache.  <br /></td></tr>
<tr class="memitem:a32d08155545949809d026537e38bc33f" id="r_a32d08155545949809d026537e38bc33f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a32d08155545949809d026537e38bc33f">dircache_init</a> (int reqsize)</td></tr>
<tr class="memdesc:a32d08155545949809d026537e38bc33f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the dircache and indexes.  <br /></td></tr>
<tr class="memitem:a634fc2bdbe6d1b5d9def7b568faae939" id="r_a634fc2bdbe6d1b5d9def7b568faae939"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a634fc2bdbe6d1b5d9def7b568faae939">log_dircache_stat</a> (void)</td></tr>
<tr class="memdesc:a634fc2bdbe6d1b5d9def7b568faae939"><td class="mdescLeft">&#160;</td><td class="mdescRight">Log dircache statistics.  <br /></td></tr>
<tr class="memitem:a29a3f7f19ae5e4c64e1a66ccee08eb38" id="r_a29a3f7f19ae5e4c64e1a66ccee08eb38"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a29a3f7f19ae5e4c64e1a66ccee08eb38">dircache_dump</a> (void)</td></tr>
<tr class="memdesc:a29a3f7f19ae5e4c64e1a66ccee08eb38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dump dircache to /tmp/dircache.PID.  <br /></td></tr>
<tr class="memitem:aba92d20849d1ff0a37238a15d6b7bdd0" id="r_aba92d20849d1ff0a37238a15d6b7bdd0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aba92d20849d1ff0a37238a15d6b7bdd0">dircache_set_validation_params</a> (unsigned int freq, unsigned int meta_win, unsigned int meta_thresh)</td></tr>
<tr class="memdesc:aba92d20849d1ff0a37238a15d6b7bdd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set directory cache validation parameters.  <br /></td></tr>
<tr class="memitem:aa1f0ff6827839912526bd91a7f4ff233" id="r_aa1f0ff6827839912526bd91a7f4ff233"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa1f0ff6827839912526bd91a7f4ff233">dircache_reset_validation_counter</a> (void)</td></tr>
<tr class="memdesc:aa1f0ff6827839912526bd91a7f4ff233"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset validation counter for consistent testing.  <br /></td></tr>
<tr class="memitem:ae62f645bef33967c49ff641fc51869ad" id="r_ae62f645bef33967c49ff641fc51869ad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae62f645bef33967c49ff641fc51869ad">dircache_report_invalid_entry</a> (struct <a class="el" href="structdir.html">dir</a> *<a class="el" href="structdir.html">dir</a>)</td></tr>
<tr class="memdesc:ae62f645bef33967c49ff641fc51869ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Report that a cache entry was invalid when actually used.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-var-members" class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aaa0f09990ad04686c3d9dbe7d4238214" id="r_aaa0f09990ad04686c3d9dbe7d4238214"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structhash__t.html">hash_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaa0f09990ad04686c3d9dbe7d4238214">dircache</a></td></tr>
<tr class="memitem:a3ae81e5992dbc08a1beb5e4392005446" id="r_a3ae81e5992dbc08a1beb5e4392005446"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3ae81e5992dbc08a1beb5e4392005446">dircache_maxsize</a></td></tr>
<tr class="memitem:a45aab051ceb772a50db7702142e59de6" id="r_a45aab051ceb772a50db7702142e59de6"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a45aab051ceb772a50db7702142e59de6">dircache_validation_freq</a> = <a class="el" href="globals_8h.html#afd6d51c0c5b9a0ddc6998e112f415083">DEFAULT_DIRCACHE_VALIDATION_FREQ</a></td></tr>
<tr class="memitem:ab1ff5dc2eaa35460d2f67c3a4e99109b" id="r_ab1ff5dc2eaa35460d2f67c3a4e99109b"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab1ff5dc2eaa35460d2f67c3a4e99109b">dircache_metadata_window</a> = <a class="el" href="globals_8h.html#ab6ad563efb5521b90b5aa1d3e96fc2bf">DEFAULT_DIRCACHE_METADATA_WINDOW</a></td></tr>
<tr class="memitem:acc60acde097f65b8a1d3fd698da48fd5" id="r_acc60acde097f65b8a1d3fd698da48fd5"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acc60acde097f65b8a1d3fd698da48fd5">dircache_metadata_threshold</a></td></tr>
<tr class="memitem:a5c2dec5855205398420054ff186fd1fa" id="r_a5c2dec5855205398420054ff186fd1fa"><td class="memItemLeft" align="right" valign="top">static volatile uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5c2dec5855205398420054ff186fd1fa">validation_counter</a> = 0</td></tr>
<tr class="memitem:a183745fef04cf15ace6032ea17342e2e" id="r_a183745fef04cf15ace6032ea17342e2e"><td class="memItemLeft" align="right" valign="top">static struct dircache_stat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a183745fef04cf15ace6032ea17342e2e">dircache_stat</a></td></tr>
<tr class="memitem:aba43390cb51375034abb102fe588c7e2" id="r_aba43390cb51375034abb102fe588c7e2"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structhash__t.html">hash_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aba43390cb51375034abb102fe588c7e2">index_didname</a></td></tr>
<tr class="memitem:a8596d2ae2953cadafee12774d76f75d6" id="r_a8596d2ae2953cadafee12774d76f75d6"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="queue_8h.html#a0150f5145b7cc9ec8c12f7c526057ffe">q_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8596d2ae2953cadafee12774d76f75d6">index_queue</a></td></tr>
<tr class="memitem:a9e2601d85172b6a6e7afe5c2fb3c5c2e" id="r_a9e2601d85172b6a6e7afe5c2fb3c5c2e"><td class="memItemLeft" align="right" valign="top">static unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9e2601d85172b6a6e7afe5c2fb3c5c2e">queue_count</a></td></tr>
</table>
<a name="doc-define-members" id="doc-define-members"></a><h2 id="header-doc-define-members" class="groupheader">Macro Definition Documentation</h2>
<a id="abc7d71657be8975a51684e41029b7964" name="abc7d71657be8975a51684e41029b7964"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc7d71657be8975a51684e41029b7964">&#9670;&#160;</a></span>get16bits</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define get16bits</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>d</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">                      ((((uint32_t)(((<span class="keyword">const</span> uint8_t *)(d))[1])) &lt;&lt; 8)    \</div>
<div class="line">                      +(uint32_t)(((<span class="keyword">const</span> uint8_t *)(d))[0]) )</div>
</div><!-- fragment -->
</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="a6fbb865cb982a5c072a6699996b18db4" name="a6fbb865cb982a5c072a6699996b18db4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fbb865cb982a5c072a6699996b18db4">&#9670;&#160;</a></span>cache_entry_externally_modified()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int cache_entry_externally_modified </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdir.html">dir</a> *</td>          <td class="paramname"><span class="paramname"><em>cdir</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct stat *</td>          <td class="paramname"><span class="paramname"><em>st</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Smart validation for directory cache entries. </p>
<p>Distinguishes between metadata-only changes (permissions, xattrs) and content changes (files added/removed) to avoid unnecessary cache invalidation. This is critical for AFP performance as directory ctime changes frequently for reasons that don't affect cached directory information.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cdir</td><td>(r) cached directory entry </td></tr>
    <tr><td class="paramname">st</td><td>(r) fresh stat information from filesystem</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if entry should be invalidated, 0 if still valid </dd></dl>

</div>
</div>
<a id="a6d640618cb44b9c65e98d4e8e68620c4" name="a6d640618cb44b9c65e98d4e8e68620c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d640618cb44b9c65e98d4e8e68620c4">&#9670;&#160;</a></span>dircache_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dircache_add </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structvol.html">vol</a> *</td>          <td class="paramname"><span class="paramname"><em>vol</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdir.html">dir</a> *</td>          <td class="paramname"><span class="paramname"><em>dir</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>create struct dir from struct path </p>
<p>Add a struct dir to the cache and its indexes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vol</td><td>(r) pointer to volume </td></tr>
    <tr><td class="paramname">dir</td><td>(r) pointer to parent directory</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on error which should result in an abort </dd></dl>

</div>
</div>
<a id="a29a3f7f19ae5e4c64e1a66ccee08eb38" name="a29a3f7f19ae5e4c64e1a66ccee08eb38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29a3f7f19ae5e4c64e1a66ccee08eb38">&#9670;&#160;</a></span>dircache_dump()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dircache_dump </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dump dircache to /tmp/dircache.PID. </p>

</div>
</div>
<a id="a74d9d9fc41c0cd46eafae3685b073752" name="a74d9d9fc41c0cd46eafae3685b073752"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74d9d9fc41c0cd46eafae3685b073752">&#9670;&#160;</a></span>dircache_evict()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void dircache_evict </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove a fixed number of (oldest) entries from the cache and indexes. </p>
<p>The default is to remove the 256 oldest entries from the cache.</p><ol type="1">
<li>Get the oldest entry</li>
<li>If it's in use i.e. open forks reference it or it's curdir requeue it, don't remove it</li>
<li>Remove the dir from the main cache and the didname index</li>
<li>Free the struct dir structure and all its members </li>
</ol>

</div>
</div>
<a id="a32d08155545949809d026537e38bc33f" name="a32d08155545949809d026537e38bc33f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32d08155545949809d026537e38bc33f">&#9670;&#160;</a></span>dircache_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dircache_init </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>reqsize</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the dircache and indexes. </p>
<p>This is called in child afpd initialization. The maximum cache size will be max(DEFAULT_MAX_DIRCACHE_SIZE, min(size, MAX_POSSIBLE_DIRCACHE_SIZE)). It initializes a hashtable which we use to store a directory cache in. It also initializes two indexes:</p><ul>
<li>a DID/name index on the main dircache</li>
<li>a queue index on the dircache</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reqsize</td><td>(r) requested maximum size from afp.conf</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on error </dd></dl>

</div>
</div>
<a id="a976bdce6decd959a633eca5cc0bb97c0" name="a976bdce6decd959a633eca5cc0bb97c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a976bdce6decd959a633eca5cc0bb97c0">&#9670;&#160;</a></span>dircache_remove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dircache_remove </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structvol.html">vol</a> *<a class="el" href="structvol.html">vol</a></td>          <td class="paramname"><span class="paramname"><em>_U_</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdir.html">dir</a> *</td>          <td class="paramname"><span class="paramname"><em>dir</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>flags</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove an entry from the dircache. </p>
<p>Callers outside of <a class="el" href="dircache_8c.html">dircache.c</a> should call this with flags = QUEUE_INDEX | DIDNAME_INDEX | DIRCACHE. </p>

</div>
</div>
<a id="a425ed736a4c8f16731a5648b23719735" name="a425ed736a4c8f16731a5648b23719735"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a425ed736a4c8f16731a5648b23719735">&#9670;&#160;</a></span>dircache_remove_children()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dircache_remove_children </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structvol.html">vol</a> *</td>          <td class="paramname"><span class="paramname"><em>vol</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdir.html">dir</a> *</td>          <td class="paramname"><span class="paramname"><em>dir</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove all child entries of a directory from the dircache. </p>
<p>When a directory is renamed or moved, the full paths stored in the dircache become invalid for all child entries of the renamed dir. This function prunes orphaned child dircache entries of given dir. CNID entries use parent DIDs and name, and requre recursion to get the full path, therefore parent changes do not invalidate the CNIDs.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vol</td><td>(r) volume </td></tr>
    <tr><td class="paramname">dir</td><td>(r) parent directory whose children should be removed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae62f645bef33967c49ff641fc51869ad" name="ae62f645bef33967c49ff641fc51869ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae62f645bef33967c49ff641fc51869ad">&#9670;&#160;</a></span>dircache_report_invalid_entry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dircache_report_invalid_entry </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdir.html">dir</a> *</td>          <td class="paramname"><span class="paramname"><em>dir</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Report that a cache entry was invalid when actually used. </p>
<p>This function should be called when a cached directory entry that was returned without validation (for performance) turns out to be invalid when actually accessed (e.g., file doesn't exist, has been modified, etc). This helps track the effectiveness of the validation frequency setting.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dir</td><td>(r) The directory entry that was found to be invalid </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa1f0ff6827839912526bd91a7f4ff233" name="aa1f0ff6827839912526bd91a7f4ff233"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1f0ff6827839912526bd91a7f4ff233">&#9670;&#160;</a></span>dircache_reset_validation_counter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dircache_reset_validation_counter </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset validation counter for consistent testing. </p>
<p>Resets the global validation counter to ensure predictable validation patterns between test runs or configuration changes. </p>

</div>
</div>
<a id="a1c5f250d2d0fb3ecdf47c16db30179df" name="a1c5f250d2d0fb3ecdf47c16db30179df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c5f250d2d0fb3ecdf47c16db30179df">&#9670;&#160;</a></span>dircache_search_by_did()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdir.html">dir</a> * dircache_search_by_did </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structvol.html">vol</a> *</td>          <td class="paramname"><span class="paramname"><em>vol</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="adouble_8h.html#aef0c7a006ff504f92f04b55e14c27422">cnid_t</a></td>          <td class="paramname"><span class="paramname"><em>cnid</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Search the dircache via a CNID for a directory. </p>
<p>Found cache entries are expunged if both the parent directory st_ctime and the objects st_ctime are modified. This func builds on the fact, that all our code only ever needs to and does search the dircache by CNID expecting directories to be returned, but not files. Thus (1) if we find a file for a given CNID we (1a) remove it from the cache (1b) return NULL indicating nothing found (2) we can then use d_fullpath to stat the directory</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vol</td><td>(r) pointer to struct vol </td></tr>
    <tr><td class="paramname">cnid</td><td>(r) CNID of the directory to search</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to struct dir if found, else NULL </dd></dl>

</div>
</div>
<a id="a6b96994f92f9267df4f0824e3bd745e5" name="a6b96994f92f9267df4f0824e3bd745e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b96994f92f9267df4f0824e3bd745e5">&#9670;&#160;</a></span>dircache_search_by_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdir.html">dir</a> * dircache_search_by_name </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structvol.html">vol</a> *</td>          <td class="paramname"><span class="paramname"><em>vol</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structdir.html">dir</a> *</td>          <td class="paramname"><span class="paramname"><em>dir</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>len</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Search the cache via did/name hashtable. </p>
<p>Found cache entries are expunged if both the parent directory st_ctime and the objects st_ctime are modified.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vol</td><td>(r) volume </td></tr>
    <tr><td class="paramname">dir</td><td>(r) directory </td></tr>
    <tr><td class="paramname">name</td><td>(r) name (server side encoding) </td></tr>
    <tr><td class="paramname">len</td><td>(r) strlen of name</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to struct dir if found in cache, else NULL </dd></dl>

</div>
</div>
<a id="aba92d20849d1ff0a37238a15d6b7bdd0" name="aba92d20849d1ff0a37238a15d6b7bdd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba92d20849d1ff0a37238a15d6b7bdd0">&#9670;&#160;</a></span>dircache_set_validation_params()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dircache_set_validation_params </td>
          <td>(</td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>freq</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>meta_win</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>meta_thresh</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set directory cache validation parameters. </p>
<p>Allows runtime configuration of cache validation behavior for performance tuning. Lower validation frequency improves performance but may delay detection of external filesystem changes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">freq</td><td>(r) validation frequency (1 = validate every access, 5 = every 5th access) </td></tr>
    <tr><td class="paramname">meta_win</td><td>(r) metadata change time window in seconds </td></tr>
    <tr><td class="paramname">meta_thresh</td><td>(r) metadata change threshold in seconds</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on invalid parameters </dd></dl>

</div>
</div>
<a id="a223c492870dd2784fcff67b99388b302" name="a223c492870dd2784fcff67b99388b302"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a223c492870dd2784fcff67b99388b302">&#9670;&#160;</a></span>hash_comp_didname()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int hash_comp_didname </td>
          <td>(</td>
          <td class="paramtype">const void *</td>          <td class="paramname"><span class="paramname"><em>k1</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *</td>          <td class="paramname"><span class="paramname"><em>k2</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="afb5dcf2c67945d9207909d9d435037e0" name="afb5dcf2c67945d9207909d9d435037e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb5dcf2c67945d9207909d9d435037e0">&#9670;&#160;</a></span>hash_comp_vid_did()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int hash_comp_vid_did </td>
          <td>(</td>
          <td class="paramtype">const void *</td>          <td class="paramname"><span class="paramname"><em>key1</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *</td>          <td class="paramname"><span class="paramname"><em>key2</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a4a06c650771691a9a12e32f908890cce" name="a4a06c650771691a9a12e32f908890cce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a06c650771691a9a12e32f908890cce">&#9670;&#160;</a></span>hash_didname()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="include_2atalk_2hash_8h.html#ad05b97a5bdacb4cc1aaf4a6268de8b48">hash_val_t</a> hash_didname </td>
          <td>(</td>
          <td class="paramtype">const void *</td>          <td class="paramname"><span class="paramname"><em>p</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ace18175c2560ab41d9a18ec91ffc0043" name="ace18175c2560ab41d9a18ec91ffc0043"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace18175c2560ab41d9a18ec91ffc0043">&#9670;&#160;</a></span>hash_vid_did()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="include_2atalk_2hash_8h.html#ad05b97a5bdacb4cc1aaf4a6268de8b48">hash_val_t</a> hash_vid_did </td>
          <td>(</td>
          <td class="paramtype">const void *</td>          <td class="paramname"><span class="paramname"><em>key</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a634fc2bdbe6d1b5d9def7b568faae939" name="a634fc2bdbe6d1b5d9def7b568faae939"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a634fc2bdbe6d1b5d9def7b568faae939">&#9670;&#160;</a></span>log_dircache_stat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log_dircache_stat </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Log dircache statistics. </p>
<p>Includes hit ratio percentage for monitoring cache effectiveness, validation-specific metrics to monitor performance impact of the optimization changes, and username for tracking per-user stats. Shows both expunged (caught by validation) and invalid_on_use (missed by validation). </p>

</div>
</div>
<a id="a72606f78425a8e9589512071b0b7dbea" name="a72606f78425a8e9589512071b0b7dbea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72606f78425a8e9589512071b0b7dbea">&#9670;&#160;</a></span>should_validate_cache_entry()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int should_validate_cache_entry </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine if cache entry should be validated against filesystem. </p>
<p>Uses probabilistic validation to reduce filesystem calls while still detecting external changes. Internal netatalk operations use explicit cache invalidation via <a class="el" href="directory_8c.html#ad9fbc8ab01c3318e8da4a88258e4b68f" title="Remove a file/directory from dircache.">dir_remove()</a> calls, so frequent validation is only needed to detect external filesystem changes.</p>
<dl class="section return"><dt>Returns</dt><dd>1 if validation should be performed, 0 otherwise </dd></dl>

</div>
</div>
<a name="doc-var-members" id="doc-var-members"></a><h2 id="header-doc-var-members" class="groupheader">Variable Documentation</h2>
<a id="aaa0f09990ad04686c3d9dbe7d4238214" name="aaa0f09990ad04686c3d9dbe7d4238214"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa0f09990ad04686c3d9dbe7d4238214">&#9670;&#160;</a></span>dircache</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structhash__t.html">hash_t</a>* dircache</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a3ae81e5992dbc08a1beb5e4392005446" name="a3ae81e5992dbc08a1beb5e4392005446"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ae81e5992dbc08a1beb5e4392005446">&#9670;&#160;</a></span>dircache_maxsize</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int dircache_maxsize</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="acc60acde097f65b8a1d3fd698da48fd5" name="acc60acde097f65b8a1d3fd698da48fd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc60acde097f65b8a1d3fd698da48fd5">&#9670;&#160;</a></span>dircache_metadata_threshold</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int dircache_metadata_threshold</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">    <a class="code hl_define" href="globals_8h.html#a94f26b483b4c06a887abbcd0a3e3e3fb">DEFAULT_DIRCACHE_METADATA_THRESHOLD</a></div>
<div class="ttc" id="aglobals_8h_html_a94f26b483b4c06a887abbcd0a3e3e3fb"><div class="ttname"><a href="globals_8h.html#a94f26b483b4c06a887abbcd0a3e3e3fb">DEFAULT_DIRCACHE_METADATA_THRESHOLD</a></div><div class="ttdeci">#define DEFAULT_DIRCACHE_METADATA_THRESHOLD</div><div class="ttdef"><b>Definition</b> globals.h:55</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab1ff5dc2eaa35460d2f67c3a4e99109b" name="ab1ff5dc2eaa35460d2f67c3a4e99109b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1ff5dc2eaa35460d2f67c3a4e99109b">&#9670;&#160;</a></span>dircache_metadata_window</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int dircache_metadata_window = <a class="el" href="globals_8h.html#ab6ad563efb5521b90b5aa1d3e96fc2bf">DEFAULT_DIRCACHE_METADATA_WINDOW</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a183745fef04cf15ace6032ea17342e2e" name="a183745fef04cf15ace6032ea17342e2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a183745fef04cf15ace6032ea17342e2e">&#9670;&#160;</a></span>dircache_stat</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct dircache_stat dircache_stat</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a45aab051ceb772a50db7702142e59de6" name="a45aab051ceb772a50db7702142e59de6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45aab051ceb772a50db7702142e59de6">&#9670;&#160;</a></span>dircache_validation_freq</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int dircache_validation_freq = <a class="el" href="globals_8h.html#afd6d51c0c5b9a0ddc6998e112f415083">DEFAULT_DIRCACHE_VALIDATION_FREQ</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aba43390cb51375034abb102fe588c7e2" name="aba43390cb51375034abb102fe588c7e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba43390cb51375034abb102fe588c7e2">&#9670;&#160;</a></span>index_didname</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structhash__t.html">hash_t</a>* index_didname</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a8596d2ae2953cadafee12774d76f75d6" name="a8596d2ae2953cadafee12774d76f75d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8596d2ae2953cadafee12774d76f75d6">&#9670;&#160;</a></span>index_queue</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="queue_8h.html#a0150f5145b7cc9ec8c12f7c526057ffe">q_t</a>* index_queue</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a9e2601d85172b6a6e7afe5c2fb3c5c2e" name="a9e2601d85172b6a6e7afe5c2fb3c5c2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e2601d85172b6a6e7afe5c2fb3c5c2e">&#9670;&#160;</a></span>queue_count</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long queue_count</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a5c2dec5855205398420054ff186fd1fa" name="a5c2dec5855205398420054ff186fd1fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c2dec5855205398420054ff186fd1fa">&#9670;&#160;</a></span>validation_counter</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint64_t validation_counter = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- HTML footer for doxygen 1.14.0-->
<!-- modified for netatalk -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_34c6163d67acbbcfc56107279c411fb1.html">etc</a></li><li class="navelem"><a href="dir_785339ec9791c4184a005bb62f1723d7.html">afpd</a></li><li class="navelem"><a href="dircache_8c.html">dircache.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
