<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>netatalk: Installation</title>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">netatalk<span id="projectnumber">&#160;4.4.0dev</span>
   </div>
   <div id="projectbrief">Free and Open Source Apple Filing Protocol (AFP) Server</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('md_manual_2_installation.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Installation </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md426"></a></p>
<blockquote class="doxtable">
<p><em><b>WARNING:</b></em> Before upgrading to Netatalk 4 from an earlier version, please read the <a href="Upgrading.html">Upgrade</a> chapter in this manual. </p>
</blockquote>
<h1 class="doxsection"><a class="anchor" id="autotoc_md427"></a>
How to obtain Netatalk</h1>
<p>Please have a look at the <a href="https://netatalk.io">Netatalk homepage</a> for the most up to date information on where to find the latest version of the software.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md428"></a>
Binary packages</h2>
<p>Binary packages of Netatalk are included in the package repositories of some Linux, BSD, and Solaris-like distributions. Installing Netatalk through this channel will give you the most seamless experience, with managed updates when new package versions are available.</p>
<p>See the <a href="https://repology.org/project/netatalk/versions">Netatalk page on Repology</a> for a living list of known Netatalk packages.</p>
<p>You might also want to have a look at 3rd party package repositories for your operating system, such as <a href="https://rpmfind.net/">rpmfind</a> for Red Hat based Linux distributions, <a href="https://www.opencsw.org/">OpenCSW</a> for Solaris and its descendants, and <a href="https://brew.sh/">Homebrew</a> or <a href="https://www.macports.org/">MacPorts</a> for macOS.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md429"></a>
Source packages</h2>
<p>Prepackaged tarballs with stable releases of the Netatalk source code are available on the <a href="https://github.com/Netatalk/netatalk/releases">Netatalk releases page on GitHub</a>.</p>
<p>The source code is also available from the <a href="https://github.com/Netatalk/netatalk">Netatalk Git repository</a>.</p>
<p>See the <a href="https://netatalk.io/install">Installation Quick Start</a> guide for instructions on how to build Netatalk from source.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md430"></a>
Prerequisites</h1>
<p>Netatalk depends on a number of third-party libraries and utilities. There are a handful of mandatory packages that must be installed before attempting to build Netatalk. In addition, there are a number of optional packages that can be installed to enhance Netatalk's functionality.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md431"></a>
Required third-party software</h2>
<ul>
<li><p class="startli">bstring</p>
<p class="startli">Netatalk relies on the Better String Library for memory safe string data manipulation and retrieval. Version 1.0.1 or later of Mike Steinert's <a href="https://github.com/msteinert/bstring">bstring</a> fork is recommended, but any version of the original <a href="https://bstring.sourceforge.net/">bstrlib</a> library by Paul Hsieh should theoretically work just as well.</p>
<p class="startli">In the absence of a shared <em>bstring</em> library, the Netatalk build system will build and install the library as a Meson subproject.</p>
</li>
<li><p class="startli">iniparser</p>
<p class="startli">The iniparser library is used to parse the configuration files. At least version 3.1 is required, while 4.0 or later is recommended.</p>
</li>
<li><p class="startli">libevent</p>
<p class="startli">Internal event callbacks in the netatalk service controller daemon are built on libevent version 2.</p>
</li>
<li><p class="startli">Libgcrypt</p>
<p class="startli">The <a href="https://gnupg.org/software/libgcrypt/">Libgcrypt</a> library supplies the encryption for the standard User Authentication Modules (UAMs). They are: DHX2, DHCAST128 (a.k.a. DHX) and RandNum.</p>
</li>
</ul>
<h3 class="doxsection"><a class="anchor" id="autotoc_md432"></a>
CNID database backends</h3>
<p>At least one of the below database libraries is required to power the CNID scheme of your choice.</p>
<ul>
<li><p class="startli">Berkeley DB</p>
<p class="startli">The default <em>dbd</em> (<em>Database Daemon</em>) CNID backend for netatalk uses Berkeley DB to store unique file identifiers.</p>
<p class="startli">The recommended Berekeley DB version is 5.3, while versions 4.6 and later should work as well. Version 6 and later should generally be avoided due to licensing issues.</p>
</li>
<li><p class="startli">MySQL Client or MariaDB Client</p>
<p class="startli">By leveraging a MySQL-compatible client library, netatalk can be built with the <em>mysql</em> CNID backend that is highly scalable and reliable. The administrator has to provide a separate database instance for use with this backend.</p>
</li>
<li><p class="startli">SQLite v3</p>
<p class="startli">The SQLite library version 3 enables the <em>sqlite</em> CNID backend which is an alternative zero-configuration backend.</p>
</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md433"></a>
Optional third-party software</h2>
<p>Netatalk can use the following third-party software to enhance its functionality.</p>
<ul>
<li><p class="startli">ACL and LDAP</p>
<p class="startli">LDAP is an open and industry-standard user directory protocol that works in tandem with the advanced permissions scheme of ACL. On some operating systems ACL and LDAP libraries are built in to the system, while on others you have to install supporting packages to enable this functionality.</p>
</li>
<li><p class="startli">Avahi or mDNSresponder for Bonjour</p>
<p class="startli">Mac OS X 10.2 and later uses Bonjour (a.k.a. Zeroconf) for automatic service discovery. Netatalk can advertise AFP file sharing and Time Machine volumes by using Avahi or mDNSResponder.</p>
<p class="startli">When using Avahi, D-Bus is also required, and the Avahi library must have been built with D-Bus support.</p>
</li>
<li><p class="startli">cmark, cmark-gfm, or pandoc</p>
<p class="startli">Netatalk's documentation is authored in Markdown format. The man page sources consist of standards-compliant CommonMark, while the rest of the documentation is authored in GitHub-Flavored Markdown (gfm).</p>
<p class="startli">The pandoc library generates the nicest output, but is significantly more resource intensive than the other two options. The cmark reference implementation is the most widely distributed, but cmark-gfm handles GitHub extensions like tables better.</p>
</li>
<li><p class="startli">CrackLib</p>
<p class="startli">When using the Random Number UAMs and netatalk's own <b>afppasswd</b> password manager, CrackLib can help protect against setting weak passwords for authentication with netatalk.</p>
<p class="startli">The CrackLib dictionary, which is sometimes distributed separately in a runtime package, is also a requirement both at compile and run time.</p>
</li>
<li><p class="startli">D-Bus</p>
<p class="startli">D-Bus provides a mechanism for sending messages between processes, used by multiple Netatalk features: Spotlight, Zeroconf with Avahi, and the <b>afpstats</b> tool.</p>
</li>
<li><p class="startli">GLib and GIO</p>
<p class="startli">Used by the <b>afpstats</b> tool to interface with D-Bus.</p>
</li>
<li><p class="startli">iconv</p>
<p class="startli">iconv provides conversion routines for many character encodings. Netatalk uses it to provide charsets it does not have built in conversions for, like ISO-8859-1. On glibc systems, Netatalk can use the glibc provided iconv implementation. Otherwise you can use the GNU libiconv implementation.</p>
</li>
<li><p class="startli">Kerberos V</p>
<p class="startli">Kerberos v5 is a client-server based authentication protocol invented at the Massachusetts Institute of Technology. With the Kerberos library, netatalk can produce the GSS UAM library for authentication with existing Kerberos infrastructure.</p>
</li>
<li><p class="startli">PAM</p>
<p class="startli">PAM provides a flexible mechanism for authenticating users. PAM was invented by SUN Microsystems. Linux-PAM is a suite of shared libraries that enable the local system administrator to choose how applications authenticate users.</p>
</li>
<li><p class="startli">Perl</p>
<p class="startli">Netatalk's administrative utility scripts rely on the Perl runtime, version 5.8 or later. The required Perl modules include <em>IO::Socket::IP</em> (asip-status) and <em>Net::DBus</em> (afpstats).</p>
</li>
<li><p class="startli">po4a</p>
<p class="startli">With the help of po4a, Netatalk's documentation can be translated into other languages. It uses gettext to extract translatable strings from source files and merge them with the translations stored in PO files.</p>
</li>
<li><p class="startli">TCP wrappers</p>
<p class="startli">Wietse Venema's network logger, also known as TCPD or LOG_TCP.</p>
<p class="startli">Security options are: access control per host, domain and/or service; detection of host name spoofing or host address spoofing; booby traps to implement an early-warning system.</p>
</li>
<li><p class="startli">LocalSearch or Tracker</p>
<p class="startli">Netatalk uses <a href="https://gnome.pages.gitlab.gnome.org/localsearch/index.html">GNOME LocalSearch</a>, or Tracker as it was previously known, version 3 or later as the metadata backend for Spotlight compatible search indexing.</p>
</li>
<li><p class="startli">talloc / bison / flex</p>
<p class="startli">Samba's talloc library, a Yacc parser such as bison, and a lexer like flex are also required for Spotlight.</p>
</li>
<li><p class="startli">UnicodeData.txt</p>
<p class="startli">The <a href="https://www.unicode.org/Public/UNIDATA/UnicodeData.txt">Unicode Character Database</a> is required to regenerate Netatalk's Unicode character conversion tables.</p>
<p class="startli">This is mostly relevant for developers or package managers who want to regenerate the Unicode source files.</p>
</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md434"></a>
Starting and stopping Netatalk</h1>
<p>The Netatalk distribution comes with several operating system specific startup script templates that are tailored according to the options given to the build system before compiling. Currently, templates are provided for systemd, openrc, in addition to platform specific scripts for popular Linux distributions, BSD variants, Solaris descendants, and macOS.</p>
<p>When building from source, the Netatalk build system will attempt to detect which init style is appropriate for your platform. You can also configure the build system to install the specific type of startup script(s) you want by specifying the <b>with-init-style</b> option. For the syntax, please refer to the build system's help text.</p>
<p>Since new Linux, *BSD, and Solaris-like distributions appear at regular intervals, and the startup procedure for the other systems mentioned above might change as well, it is a good idea to not blindly install a startup script but to confirm first that it will work on your system.</p>
<p>If you use Netatalk as part of a fixed setup, like a Linux distribution, an RPM or a BSD package, things will probably have been arranged properly for you. The previous paragraphs therefore apply mostly for people who have compiled Netatalk themselves.</p>
<p>The following daemon need to be started by whatever startup script mechanism is used:</p>
<ul>
<li>netatalk</li>
</ul>
<p>In the absence of a startup script, you can also launch this daemon directly (as root), and kill it with SIGTERM when you are done with it.</p>
<p>Additionally, make sure that the configuration file <em>afp.conf</em> is in the right place. You can inquire netatalk where it is expecting the file to be by running the <b>netatalk -V</b> command.</p>
<p>If you want to run AppleTalk services, you also need to start the <b>atalkd</b> daemon, plus the optional <b>papd</b>, <b>timelord</b>, and <b>a2boot</b> daemons. See the <a href="AppleTalk.html">AppleTalk</a> chapter in this manual for more information. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
